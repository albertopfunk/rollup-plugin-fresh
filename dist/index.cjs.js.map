{"version":3,"file":"index.cjs.js","sources":["../src/index.js"],"sourcesContent":["import {existsSync, readdir} from 'fs';\r\nimport {normalize} from 'path';\r\nimport rimraf from 'rimraf';\r\n\r\n\r\nasync function asyncRimraf(path) {\r\n  return new Promise((resolve, reject) => {\r\n    resolve(rimraf(path, () => {\r\n      resolve(\"Success\")\r\n    }))\r\n  }) \r\n}\r\n\r\n\r\nexport default function({deleteAll = true, chosenDir = \"\", noDeleteOptions = [], quiet = false} = {}) {\r\n  \r\n  const normPath = normalize(chosenDir);\r\n\r\n  if (!existsSync(normPath)) {\r\n    quiet ? null : console.log(\"Dir Not Found\")\r\n    return;\r\n  }\r\n\r\n  async function asyncClearEach(items) {\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (existsSync(normPath + items[i])) {\r\n        quiet ? null : console.log(\"File Removed:\", items[i]);\r\n        await asyncRimraf(normPath + items[i]);\r\n      } else {\r\n        quiet ? null : console.log(\"File Not Found:\", items[i]);\r\n      }\r\n    }\r\n  }\r\n  \r\n  readdir(normPath, async function(err, items) {\r\n\r\n    if (!deleteAll) {\r\n      if (noDeleteOptions.length < 1) {\r\n        quiet ? null : console.log(\"No Options Passed\");\r\n        return;\r\n      }\r\n\r\n      let filteredItems = [];\r\n      items = items.filter(item => !item.includes(noDeleteOptions[0]));\r\n      filteredItems.push(...items);\r\n\r\n      if (noDeleteOptions.length > 1) {\r\n        for (let i = 1; i < noDeleteOptions.length; i++) {\r\n          filteredItems = filteredItems.filter(item => !item.includes(noDeleteOptions[i]));\r\n        }\r\n      }\r\n\r\n      asyncClearEach(filteredItems);\r\n      return {\r\n        name: \"startFresh\"\r\n      }\r\n\r\n      // return {\r\n      //   name: \"startFresh\",\r\n      //   async buildStart(options) {\r\n      //     quiet ? null : console.log(\"OIOIOIOIOIOI\")\r\n      //     asyncClearEach(filteredItems);\r\n      //   }\r\n      // }\r\n    }\r\n    \r\n    asyncClearEach(items);\r\n    return {\r\n      name: \"startFresh\"\r\n    }\r\n\r\n    // return {\r\n    //   name: \"startFresh\",\r\n    //   async buildStart(options) {\r\n    //     quiet ? null : console.log(\"OIOIOIOIOIOI\")\r\n    //     asyncClearEach(items);\r\n    //   }\r\n    // }\r\n  });\r\n}\r\n"],"names":["normalize","existsSync","readdir"],"mappings":"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"}